<html>
<head>
<style>
.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: 120px;
    background-color: black;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;

    /* Position the tooltip */
    position: absolute;
    z-index: 1;
}

.tooltip:hover .tooltiptext {
    visibility: visible;
}
</style>


</style>
<script language="JavaScript">
var points = [{"id": 0, "x": 127, "y": 107, "text": "Hi"}, {"id": 1, "x": 220, "y": 170, "text": "Nice"}, {"id": 2, "x": 220, "y": 204, "text": "HAHAHA!"}]
var a = [[84, 189], [266, 35], [276, 226], [96, 245], [154, 66], [214, 133]]
var s_id = 3
var x_to_add = 0
var y_to_add = 0

function point_it(event){

	pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById("pointer_div").offsetLeft;
	pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById("pointer_div").offsetTop;


    // document.getElementById("tag_input").style.left = (pos_x-1);
	// document.getElementById("tag_input").style.top = (pos_y-15);
	// document.getElementById("tag_input").style.visibility = "visible";
    // document.getElementById("tag_input").style.position = "absolute";
    // document.getElementById("tag_input").style.size = "100";
    
	// var para = document.createElement("p");
	// var node = document.createTextNode("This is new.");
	// para.appendChild(node);

	// para.style.left = (pos_x-1);
	// para.style.top = (pos_y-15);
	// para.style.visibility = "visible";
	// para.style.position = "absolute";


	caption_field = document.getElementById("caption")
	caption_field.hidden = ""
	x_to_add = pos_x-1
	y_to_add = pos_y-15

	//create_node(pos_x-1, pos_y-15)

}
	
window.onload = function() {
	var list = document.createElement('ul');
	list.id = 'commentList'

	for (var i = 0; i < points.length; i++) { 
		create_node(points[i].x, points[i].y)
        var item = document.createElement('li');

		var textNode = document.createTextNode(points[i].text)
        item.appendChild(textNode);


        list.appendChild(item);

	}
	document.getElementById('foo').appendChild(list);

}

function create_node(x, y, text="") {
	var btn = document.createElement("P");
	var t = document.createTextNode("+");
	btn.style.size = "100";
	btn.style.left = (x);
	btn.style.top = (y);
	btn.style.visibility = "visible";
	btn.style.position = "absolute";
	btn.className = "tooltip";
	if (text) {
		var spanEl = document.createElement("SPAN")
		spanEl.className = "tooltiptext"
		spanEl.textContent = text
		btn.appendChild(spanEl)

		var item = document.createElement('li')
		item.appendChild(document.createTextNode(x + " " + y + " " + text))
		var commentList = document.getElementById('commentList')
		commentList.appendChild(item)
	} 
	btn.appendChild(t);
	document.body.appendChild(btn);


}

function enter_pressed(e) {
    if (e.keyCode == 13) {
		var caption_field = document.getElementById('caption')
        create_node(x_to_add, y_to_add, caption_field.value)
        return false;
    }
}

</script>
</head>
<body>


<div id="pointer_div" onclick="point_it(event)" style = "background-image:url('eiffel.jpg');width:500px;height:333px;">
<img src="point.gif" id="cross" style="position:relative;visibility:hidden;z-index:2;"></div>

<input type="text" id="caption" size="100" hidden="true" onkeypress="return enter_pressed(event)"/>
</form> 
<div id='foo'></div>
</body>
</html>